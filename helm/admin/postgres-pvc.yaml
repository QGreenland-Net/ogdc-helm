# For local development use:
#
# Creates a persistent volume claim named "postgres-pvc". 
#
# This should be done only one time, separately from the helm install/upgrade cycle,
#
# NOTE: ensure that a PersistentVolume has already been created before creating
#       the PersistentVolumeClaim!  (See postgres-pv.yaml for details)
#
# update the RELEASE_NAME variable below to match your release name, using envsubst or
#  manually replacing ${RELEASE_NAME} with your release name.
#
# Create by running the command:        kubectl apply -n <mynamespace> -f postgres-pvc.yaml
#
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name:  cephfs-${RELEASE_NAME}-postgres-pvc
  labels:
    velero.io/exclude-from-backup: "true"
spec:
  ## See https://kubernetes.io/docs/concepts/storage/persistent-volumes/#access-modes
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 5Gi
  storageClassName: local-path
  volumeName: cephfs-${RELEASE_NAME}-postgres-pv
